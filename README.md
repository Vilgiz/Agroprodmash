# Agroprodmash

Если есть траблы - звони/пиши. Готов к удаленному управлению, если это будет необходимо

## Последовательность действий

- [Скачать себе репозиторий](#Скачать-себе-репозиторий)
- [Установить библиотеки из него в виртуальное пространство](#Установить-библиотеки-из-него-в-виртуальное-пространство)
- [Подсосаться к роботу](#Подсосаться-к-роботу)
- [Калибровка света и яркости(ползунки)](#Калибровкасветаияркости)
- [Калибровка цвета и логотипа робовизард(ползунки)](#Калибровкацветаилоготипаробовизард)
- [Калибровка Хафа(ползунки)](#КалибровкаХафа)
- [Калибровка координат Питон](#КалибровкакоординатПитон)
- [Калибровка координат AS](#КалибровкакоординатAS)
- [Калибровка предсказания](#Калибровкапредсказания)
- [amcap.exe](#amcap.exe)
- [Траблшутинг](#Калибровкапредсказания)
- [Источники](#Источники)

## Скачать себе репозиторий

Скачиваешь или клонируешь репозиторий

(кнопка Code -> download ZIP)

Папка должна выглядить так:

![Вот так](https://github.com/Vilgiz/Agroprodmash/raw/main/1.png)

1.png

## Установить библиотеки из него в виртуальное пространство

Установи все библиотеки из myenv - если не знаешь как, спроси у chatgpt - он понятнее и подробнее объяснит

## Подсосаться к роботу

Проверь соединение - запусти Comp_vision.py и проверь с одной банкой, что все приходит на робота, а на питоне все отображается и не вылетает - это значит что все установлено правильно

## Калибровка света и яркости(ползунки)

Раскомменти это и ты увидишь ползунки после запуска файла

```typescript
# ? cv2.createTrackbar('brightness_factor', 'Video', 1, 2000, self.__onbrightness_factor)
# ? cv2.createTrackbar('contrast_factor', 'Video', 1, 2000, self.__onContrast_factor)
# ? cv2.createTrackbar('saturation_factor', 'Video', 1, 2000, self.__onsaturation_factor)
```

Потом полученные значения раздели на 1000 и запиши сюда

```typescript
self.brightness_factor = 0.725;
self.contrast_factor = 1.661;
self.saturation_factor = 1.371;
```

Потом закоменти это обратно (ВАЖНО)

## Калибровка цвета и логотипа робовизард(ползунки)

Раскомменти это и ты увидишь ползунки после запуска файла

```typescript
# ? cv2.createTrackbar('__B_color_low', 'Video', 1, 254, self.__B_color_low)
# ? cv2.createTrackbar('__R_color_low', 'Video', 1, 254, self.__R_color_low)
# ? cv2.createTrackbar('__G_color_low', 'Video', 1, 254, self.__G_color_low)
# ? cv2.createTrackbar('__B_color_hight', 'Video', 1, 254, self.__B_color_hight)
# ? cv2.createTrackbar('__R_color_hight', 'Video', 1, 254, self.__R_color_hight)
# ? cv2.createTrackbar('__G_color_hight', 'Video', 1, 254, self.__G_color_hight)
```

поставь банку с робовизардом перед камерой и крути верхние, отталкиваясь от значений ниже, чаще всего 5 и 6 в максимум, а 4 придется покрутить от 1 до 10 примерно, но это не факт, так было на заводе и у меня дома )0)0)

нужно добиться того, чтобы на малеком окошке (который открывает тебе питон, после того как найдет банку без лого) на банке с лого был видел только красный лого (он будет отображен белым)

Потом полученные значения запиши сюда

```typescript
self.B_color_low = 1;
self.R_color_low = 1;
self.G_color_low = 1;
self.B_color_hight = 4;
self.R_color_hight = 254;
self.G_color_hight = 254;
```

Потом закоменти это обратно (ВАЖНО)

## Калибровка Хафа(ползунки)

## Калибровка координат Питон

Оставим калибровку на преждем уровне, относительно робота левый нижний угол - туда тул и запоминаешь точку, на питоне - запускаешь calibration_old.py, предвательно поставив перед камерой aruco marker
с ID 0!
Он должен быть размером как в файле:

```typescript
real_dlina = 58;
```

это в миллиметрах

расположи маркер так, что на получившимся фото фиолетовая линия была с правой стороны квадрата

## Калибровка координат AS

На as у нас были костыли к коррекции движения при высчитытывании координат, их точно надо уточнить, и, возможно, они будут в разы меньше

## Калибровка предсказания

## amcap.exe

Перед запуском на чистовую надо запустить файл amcap.exe

Devices -> выбрать камеру -> Options -> Video capture vilter -> найти калибровку фокуса и выдержки -> отключить режим авто-> сделать красиво

## Траблшутинг

## Источники

ChatGPT

```sh
$ npm i your-awesome-plugin-name
```

```typescript
import { hi } from "your-awesome-plugin-name";

hi(); // Выведет в консоль "Привет!"
```

```sh
npm run test
```
